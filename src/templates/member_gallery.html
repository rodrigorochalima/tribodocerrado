{% extends 'base_member.html' %}

{% block title %}Galeria - Tribo do Cerrado{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="card border-danger mb-4">
        <div class="card-header bg-danger text-white">
            <h3 class="mb-0">
                <i class="fas fa-images me-2"></i> GALERIA DE FOTOS
            </h3>
        </div>
        <div class="card-body">
            <!-- Galeria dinâmica com transição automática de imagens -->
            <div class="dynamic-gallery-container mb-5">
                <div class="dynamic-gallery">
                    <div class="gallery-slider">
                        <div class="gallery-slide active">
                            <img src="{{ url_for('static', filename='images/gallery/ride1.jpg') }}" alt="Passeio em grupo" class="img-fluid">
                            <div class="slide-caption">
                                <h3>Passeio em Grupo</h3>
                                <p>Aventura nas estradas do Cerrado</p>
                            </div>
                        </div>
                        <div class="gallery-slide">
                            <img src="{{ url_for('static', filename='images/gallery/ride2.jpg') }}" alt="Encontro de motociclistas" class="img-fluid">
                            <div class="slide-caption">
                                <h3>Encontro Anual</h3>
                                <p>Confraternização da Tribo do Cerrado</p>
                            </div>
                        </div>
                        <div class="gallery-slide">
                            <img src="{{ url_for('static', filename='images/gallery/ride3.jpg') }}" alt="Trilha off-road" class="img-fluid">
                            <div class="slide-caption">
                                <h3>Trilhas Off-road</h3>
                                <p>Desafiando os limites no Cerrado brasileiro</p>
                            </div>
                        </div>
                        <div class="gallery-slide">
                            <img src="{{ url_for('static', filename='images/gallery/ride4.jpg') }}" alt="Acampamento" class="img-fluid">
                            <div class="slide-caption">
                                <h3>Acampamento</h3>
                                <p>Noites sob as estrelas do Cerrado</p>
                            </div>
                        </div>
                        <div class="gallery-slide">
                            <img src="{{ url_for('static', filename='images/gallery/ride5.jpg') }}" alt="Ação social" class="img-fluid">
                            <div class="slide-caption">
                                <h3>Ação Social</h3>
                                <p>Tribo do Cerrado fazendo a diferença</p>
                            </div>
                        </div>
                    </div>
                    <div class="gallery-controls">
                        <button class="gallery-prev"><i class="fas fa-chevron-left"></i></button>
                        <div class="gallery-indicators">
                            <span class="indicator active" data-slide="0"></span>
                            <span class="indicator" data-slide="1"></span>
                            <span class="indicator" data-slide="2"></span>
                            <span class="indicator" data-slide="3"></span>
                            <span class="indicator" data-slide="4"></span>
                        </div>
                        <button class="gallery-next"><i class="fas fa-chevron-right"></i></button>
                    </div>
                </div>
            </div>

            <!-- Categorias de Galeria -->
            <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-folder-open me-2"></i> Categorias</h4>
            
            <div class="row row-cols-1 row-cols-md-3 g-4 mb-5">
                <div class="col">
                    <div class="card h-100">
                        <img src="{{ url_for('static', filename='images/gallery/category-rides.jpg') }}" class="card-img-top" alt="Passeios">
                        <div class="card-body">
                            <h5 class="card-title">Passeios</h5>
                            <p class="card-text">Nossas aventuras pelas estradas do Brasil.</p>
                            <a href="#" class="btn btn-danger">Ver Galeria</a>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="{{ url_for('static', filename='images/gallery/category-events.jpg') }}" class="card-img-top" alt="Eventos">
                        <div class="card-body">
                            <h5 class="card-title">Eventos</h5>
                            <p class="card-text">Encontros, confraternizações e celebrações.</p>
                            <a href="#" class="btn btn-danger">Ver Galeria</a>
                        </div>
                    </div>
                </div>
                <div class="col">
                    <div class="card h-100">
                        <img src="{{ url_for('static', filename='images/gallery/category-bikes.jpg') }}" class="card-img-top" alt="Motos">
                        <div class="card-body">
                            <h5 class="card-title">Motos</h5>
                            <p class="card-text">As máquinas que nos levam à liberdade.</p>
                            <a href="#" class="btn btn-danger">Ver Galeria</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Fotos Recentes -->
            <h4 class="border-bottom pb-2 mb-4"><i class="fas fa-clock me-2"></i> Fotos Recentes</h4>
            
            <div class="row g-3 mb-4">
                {% for i in range(1, 9) %}
                <div class="col-6 col-md-3">
                    <div class="gallery-item">
                        <img src="{{ url_for('static', filename='images/gallery/photo' + i|string + '.jpg') }}" class="img-fluid rounded" alt="Foto {{ i }}">
                        <div class="gallery-overlay">
                            <div class="gallery-actions">
                                <a href="{{ url_for('static', filename='images/gallery/photo' + i|string + '.jpg') }}" class="btn btn-sm btn-light" data-bs-toggle="modal" data-bs-target="#photoModal{{ i }}">
                                    <i class="fas fa-expand"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Modal para visualização da foto -->
                    <div class="modal fade" id="photoModal{{ i }}" tabindex="-1" aria-hidden="true">
                        <div class="modal-dialog modal-lg modal-dialog-centered">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Foto {{ i }}</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                </div>
                                <div class="modal-body text-center">
                                    <img src="{{ url_for('static', filename='images/gallery/photo' + i|string + '.jpg') }}" class="img-fluid" alt="Foto {{ i }}">
                                </div>
                                <div class="modal-footer">
                                    <div class="text-start flex-grow-1">
                                        <p class="mb-0"><strong>Data:</strong> {{ "2025-05-" + (i+10)|string }}</p>
                                        <p class="mb-0"><strong>Local:</strong> Chapada dos Veadeiros, GO</p>
                                    </div>
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <div class="text-center">
                <a href="#" class="btn btn-danger">Ver Todas as Fotos</a>
            </div>
        </div>
    </div>
</div>

<style>
/* Estilos para a galeria dinâmica */
.dynamic-gallery-container {
    position: relative;
    overflow: hidden;
    margin-bottom: 2rem;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

.dynamic-gallery {
    position: relative;
    width: 100%;
}

.gallery-slider {
    position: relative;
    width: 100%;
    height: 400px;
    overflow: hidden;
}

.gallery-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    background-color: #000;
}

.gallery-slide.active {
    opacity: 1;
    z-index: 1;
}

.gallery-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.slide-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 20px;
    background: linear-gradient(to top, rgba(0,0,0,0.8), rgba(0,0,0,0));
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
}

.slide-caption h3 {
    margin: 0;
    font-size: 1.8rem;
    font-family: 'Metal Mania', cursive;
    color: #d35400;
}

.gallery-controls {
    position: absolute;
    bottom: 20px;
    right: 20px;
    z-index: 2;
    display: flex;
    align-items: center;
}

.gallery-prev, .gallery-next {
    background-color: rgba(0,0,0,0.5);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: background-color 0.3s;
}

.gallery-prev:hover, .gallery-next:hover {
    background-color: rgba(211, 84, 0, 0.8);
}

.gallery-indicators {
    display: flex;
    margin: 0 10px;
}

.indicator {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    background-color: rgba(255,255,255,0.5);
    margin: 0 5px;
    cursor: pointer;
    transition: background-color 0.3s;
}

.indicator.active {
    background-color: #d35400;
}

/* Estilos para os itens da galeria */
.gallery-item {
    position: relative;
    overflow: hidden;
    border-radius: 8px;
    margin-bottom: 1rem;
}

.gallery-item img {
    transition: transform 0.3s ease;
}

.gallery-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.gallery-item:hover img {
    transform: scale(1.05);
}

.gallery-item:hover .gallery-overlay {
    opacity: 1;
}

/* Fonte estilo rock para títulos */
@import url('https://fonts.googleapis.com/css2?family=Metal+Mania&display=swap');

.card-header h3 {
    font-family: 'Metal Mania', cursive;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Galeria dinâmica com transição automática
    const slides = document.querySelectorAll('.gallery-slide');
    const indicators = document.querySelectorAll('.indicator');
    const prevBtn = document.querySelector('.gallery-prev');
    const nextBtn = document.querySelector('.gallery-next');
    let currentSlide = 0;
    let slideInterval;
    
    // Função para mostrar um slide específico
    function showSlide(index) {
        // Remover classe active de todos os slides e indicadores
        slides.forEach(slide => slide.classList.remove('active'));
        indicators.forEach(indicator => indicator.classList.remove('active'));
        
        // Adicionar classe active ao slide e indicador atual
        slides[index].classList.add('active');
        indicators[index].classList.add('active');
        
        // Atualizar índice do slide atual
        currentSlide = index;
    }
    
    // Função para avançar para o próximo slide
    function nextSlide() {
        let next = currentSlide + 1;
        if (next >= slides.length) next = 0;
        showSlide(next);
    }
    
    // Função para voltar para o slide anterior
    function prevSlide() {
        let prev = currentSlide - 1;
        if (prev < 0) prev = slides.length - 1;
        showSlide(prev);
    }
    
    // Iniciar transição automática
    function startSlideShow() {
        slideInterval = setInterval(nextSlide, 5000); // Trocar slide a cada 5 segundos
    }
    
    // Parar transição automática
    function stopSlideShow() {
        clearInterval(slideInterval);
    }
    
    // Adicionar eventos aos botões de navegação
    prevBtn.addEventListener('click', function() {
        prevSlide();
        stopSlideShow();
        startSlideShow(); // Reiniciar o temporizador
    });
    
    nextBtn.addEventListener('click', function() {
        nextSlide();
        stopSlideShow();
        startSlideShow(); // Reiniciar o temporizador
    });
    
    // Adicionar eventos aos indicadores
    indicators.forEach((indicator, index) => {
        indicator.addEventListener('click', function() {
            showSlide(index);
            stopSlideShow();
            startSlideShow(); // Reiniciar o temporizador
        });
    });
    
    // Iniciar a apresentação de slides
    startSlideShow();
    
    // Pausar a apresentação quando o mouse estiver sobre a galeria
    document.querySelector('.dynamic-gallery').addEventListener('mouseenter', stopSlideShow);
    document.querySelector('.dynamic-gallery').addEventListener('mouseleave', startSlideShow);
});
</script>
{% endblock %}
